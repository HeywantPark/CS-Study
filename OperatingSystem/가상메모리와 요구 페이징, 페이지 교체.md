가상메모리와 요구 페이징, 페이지 교체
=============

## 1. 가상메모리
> 가상메모리란?
  - 운영체제에서는 물리적인 메모리 크기와 상관없이 프로세스에서 커다란 메모리를 제공함.

> 가상메모리를 사용하는 이유
  - 프로세스를 모두 물리 메모리에 의존시킨다면 실제 메모리 용량보다 큰 프로그램의 경우 실행될 수 없음
    - ex) 프로그램 동시 실행, 용량이 큰 프로그램 실행
  - 가상메모리는 프로세스 실행시 필요한 부분만 메모리에 올라가고 나머지는 디스크에 존재
  - 하드디스크에 존재하면서 메모리 관리자가 관리하는 영역을 스왑 영역이라고 하며 가상메모리는 스왑 영역과 물리 메모리를 합친 것

> 가상메모리에서 하는 일
  - 가상 주소를 사용하다가 실제로 메모리에 접근할때만 물리 주소로 변경
  - MMU는 가상주소를 물리주소로 변환해주는 하드웨어 장치(Dynamic Address Translation, DAT)
![가상메모리 이미지](/OperatingSystem/images/virtualmemory.png)

## 2. 요구 페이징
> 요구페이징이란?
- 프로세스에서 요청하는 데이터를 메모리에 적재하는 방법
- 효율적인 메모리 관리를 위해 최소한의 프로세스만 유지할 수 있도록 함

> 요구페이징 작동원리
- 프로세스 실행 시점에 해당 프로세스의 가상 주소 공간을 만듦
- 페이지 부재 발생시 운영체제에서 해당 페이지를 디스크에서 메모리로 가져옴
- 페이지 교체는 공간이 부족할 때 메모리에 적재되어 있는 가장 오래된 페이지를 디스크로 옮기고 새로운 페이지를 메모리로 가져옴
  - 이 때 페이지 교체 알고리즘 사용
- 최초에는 메모리에 적재되어있는 정보를 페이지 테이블에 저장하고 지속적으로 페이지를 참조하면서 테이블에 저장되어 있는지 확인
- 메모리에 올라가지 않는 정보들은 디스크에 저장되며 이것을 스왑 파일이라고 함

## 3. 페이지 교체
> 페이지 교체란?
- 페이지 부재가 발생할 때 페이지 교체가 발생함
- 일반적으로 프로세스가 요구한 페이지가 메모리에 없다면 페이지 부재가 발생하는데 이 때 원하는 페이지를 디스크에서 가지고 온다. 여기서 물리 공간이 가득찼을 경우 페이지 교체가 이루어진다.
- 메모리에서 사용할 가능성이 가장 낮은 페이지를 교체 대상으로 선정하는 것이 시스템을 향상시킬 수 있는 우선적인 방법

> 페이지 교체 알고리즘 종류
1. OPT(Optimal page replacement)
- 가장 오랫동안 사용되지 않을 페이지 교체
![OPT 이미지](/OperatingSystem/images/opt.png)

2. FIFO(First In First Out)
- 가장 먼저 들어온 페이지 교체
![FIFO 이미지](/OperatingSystem/images/fifo.png)

3. LRU(Least Recently Used)
- 가장 오랫동안 사용되지 않은 페이지 교체
![LRU 이미지](/OperatingSystem/images/lru.png)

4. LFU(Least Frequently Used)
- 참조 횟수가 가장 작은 페이지 교체
- 참조 횟수가 같을 경우 오래된 페이지를 교체
![LFU 이미지](/OperatingSystem/images/lfu.png)

5. MFU(Most Frequently Used)
- 참조 횟수가 가장 많은 페이지 교체
![MFU 이미지](/OperatingSystem/images/mfu.png)

6. NUR(Not Used Recently)
- 최근에 미사용된 페이지를 교체
- 최근 사용여부를 확인하기 위해 페이지마다 참조비트와 변형비트를 사용
- LRU의 단점인 시간 오버헤드를 적게하여 개선한 방법

### 참고 사이트
- https://pinopino.tistory.com/entry/6-%EA%B0%80%EC%83%81-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%9A%94%EA%B5%AC-%ED%8E%98%EC%9D%B4%EC%A7%95-%ED%8E%98%EC%9D%B4%EC%A7%80-%EA%B5%90%EC%B2%B4-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98
- https://superohinsung.tistory.com/127
- https://wookcode.tistory.com/184
