# 정규화(Normalization)

- 데이터베이스 설계에서 중복을 최소화하고 데이터의 일관성, 효율성, 유지보수성을 향상시키기 위한 과정
- 데이터의 구조를 최적화하여 삽입, 갱신, 삭제 작업을 효율적으로 수행하고 데이터 일관성을 유지하기 위함
  - 이상 현상 (Anomaly) 제거

> 정규화는 논리적 설계 단계에서 수행

### 🤔 정규화를 하는 이유?

- **데이터 중복**을 해소하기 위해 (릴레이션 분해)

<br>

## 정규화 종류

| 정규화    | 설명                                    |
| --------- | --------------------------------------- |
| 제1정규화 | 원자값이 아닌 도메인(속성)을 분해       |
| 제2정규화 | 부분함수 종속성 제거                    |
| 제3정규화 | 이행함수 종속성 제거                    |
| BCNF      | 결정자가 후보키가 아닌 함수 종속성 제거 |
| 제4정규화 | 다중 종속성 제거                        |
| 제5정규화 | 조인 종속성 제거                        |

<br>

### ✔ 제 1 정규화 (1NF)

- 원자값이 아닌 도메인(속성)을 분해
- **중복된 속성 제거**
- 어떤 릴레이션에 속한 모든 도메인이 원자값으로 구성되어 있다면 1NF 만족

![](/Database/images/normal.jpg)

<br>

### ✔ 제 2 정규화 (2NF)

- 부분함수 종속성 제거

![](/Database/images/normal2.jpg)

- JOIN을 통해서 데이터를 가지고 오기 때문에 결정자를 남김

<br>

### ✔ 제 3 정규화 (3NF)

- 이행함수 종속성 제거
- 이행: transitive
- 기본키 집합에 종속되지 않고 일반 속성에 종속되는 속성을 분해

![](/Database/images/normal3.jpg)

<br>
<br>

> ![관계](/Database/images/normal5.jpg) <br> <br>
>
> #### 2NF
>
> ![](/Database/images/normal6.jpg) <br> <br>
>
> #### 3NF
>
> ![](/Database/images/normal7.jpg) <br> <br>
>
> ### 결과
>
> ![](/Database/images/normal8.jpg)

<br>
<br>

### ✔ BCNF (Boyce-Codd Normal Form)

- 결정자가 후보키가 아닌 함수 종속성 제거
  - 결정자가 후보키가 아니면서, 종속자가 기본키 또는 기본키의 부분집합인 경우
- BCNF 정규형인 모든 릴레이션은 제3정규형에 속함 (역은 성립X)

![](/Database/images/normal4.jpg)

- 복합 기본키에서 단일 기본키가 됨 : 속성들이 기본키에 종속되는지 여부는 다시 확인해야 함

![](/Database/images/normal9.jpg)

![](/Database/images/normal10.jpg)

<br>

### 제 4 정규화 (4NF)

- 다중값 종속성을 제거
  - 다중값: 속성과 속성 간의 관계가 1:N
- 릴레이션에서 속성 A->>B가 존재할 때 모든 속성도 속성 A에 종속될 수 있도록 분해

![](/Database/images/normal11.jpg)

<br>

### 제 5 정규화 (5NF)

- 후보키를 통하지 않은 조인 종속성 제거
- 릴레이션을 셋으로 분리해야지만 조인을 통해 원본 조회 가능

![](/Database/images/normal12.jpg)

<br>

## 정규화 수준 선택 기준

- 비즈니스 요구사항과 확장을 고려
- 정규화가 많아지면 데이터의 조작이 복잡해지고 유지보수가 어려워짐
- 릴레이션 분해로 인해 릴레이션 간의 JOIN 연산 많아짐
- 질의에 대한 응답 시간이 느려질 수 있음
- 따라서 데이터를 처리할 때 속도가 빨라질 수도 있고 느려질 수도 있음

▶ JOIN이 많이 발생하여 성능 저하가 나타나면 **반정규화**를 적용할 수도 있음
