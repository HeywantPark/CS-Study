# JSP

## JSP란?

**JSP(Java Server Pages)**는 동적 웹페이지를 개발하기 위한 프로그래밍 기술로, Java를 사용하여 서버측에서 웹 페이지를 생성해 웹 브라우저로 전송합니다.

### JSP의 장점
- 짧은 코드로 동적인 웹 페이지를 생성할 수 있음.
- 기본적인 예외는 자동으로 처리됨.
- 많은 확장 라이브러리를 사용할 수 있음.
- 스레드 기반으로 실행되어 시스템 자원을 절약함.
- JSP는 Java EE(Java Platform, Enterprise Edition)의 핵심요소로 대한민국에서 사용률이 높은 기술임.

---

## JSP의 탄생 배경

### 정적 웹페이지에서 동적 웹페이지로
- **정적 웹페이지**: 항상 동일한 내용을 제공.
- **동적 웹페이지**: 클라이언트의 요청에 따라 적절한 내용을 생성하여 제공.

오늘날의 웹페이지는 정적과 동적 웹페이지가 혼합된 형태로 존재.

### 동적 웹페이지 기술의 발전

#### 1. 애플릿
- 고대의 자바 기술로 동적 웹 구현.
- 더 이상 지원되지 않음.

#### 2. 서블릿
- Java 코드 내에서 HTML을 생성 및 조립.
- 코드량이 많아 가독성과 유지보수가 어려움.

#### 3. JSP
- HTML 코드에 Java 코드를 삽입하는 방식으로 서블릿의 단점을 보완.
- JSP는 서블릿으로 변환 후 실행되며 다음과 같은 장점이 있음:
  - 한 번 서블릿으로 컴파일된 JSP 파일은 캐시되어 성능 저하 없음.
  - 서블릿 기술과 병행 사용 가능.
  - 클라이언트 단은 JSP, 서버 단은 서블릿으로 사용.

| **서블릿**                        | **JSP**                          |
|------------------------------------|------------------------------------|
| Java 코드 안에서 HTML 생성        | HTML 코드 안에 Java 코드 삽입     |
| 변수 선언 및 초기화 필요           | 내장 객체 제공 (request, out 등) |
| Controller 역할                    | View 역할                         |

---

## JSP의 기본 구조

JSP 파일은 **HTML 문서 + JSP 요소**로 구성.

![image (8)](https://github.com/user-attachments/assets/ae5dd50b-7457-4f48-9c7d-53eafe003248)


### JSP 요소
1. **지시어 (Directive)**
2. **스크립트 요소 (Script Element)**
    - 선언부 (Declaration)
    - 스크립틀릿 (Scriptlet)
    - 표현식 (Expression)

### 1. 지시어 (Directive)
SP페이지를 Java코드로(서블릿) 변환하는데 필요한 정보를 JSP엔진에게 알려주는 부분 입니다.
주로 스크립트 언어나 인코딩 방식 등을 설정합니다.

지시어 종류는 아래와 같으며, 지시어 종류에 따라 사용할 수 있는 속성이 다릅니다.

#### 지시어 종류
- **page**: JSP 페이지 설정 (문서 타입, 인코딩 등).
- **include**: 외부 파일을 포함.
- **taglib**: 표현 언어(EL) 및 JSTL 설정.

###page 지시어

JSP 페이지에 대한 정보를 설정하는 지시어 입니다.
예를 들어 문서의 타입, 에러페이지, MIME타입과 같은 정보를 설정합니다.

#### 작성 방식
```jsp
<%@ page 속성명1="값1" 속성명2="값2" %>
```

#### 주요 속성

| 속성                | 내용                                          | 기본값        |
|---------------------|-----------------------------------------------|---------------|
| `info`              | 페이지 설명 입력                             | -             |
| `language`          | 스크립팅 언어 지정                          | `java`        |
| `contentType`       | MIME 타입 지정 (UTF-8로 설정 필요)           | `ISO-8859-1` |
| `pageEncoding`      | 인코딩 지정                                 | `ISO-8859-1` |
| `import`            | Java 패키지/클래스 지정                     | -             |
| `session`           | 세션 사용 여부 지정                         | `true`        |
| `buffer`            | 출력 버퍼 크기 지정                         | `8kb`         |
| `errorPage`         | 에러 발생 시 보여줄 페이지 지정              | -             |


###include 지시어

웹 사이트 헤더나, 푸터 등 처럼 해당 사이트 내 모든 페이지에서 반복되어 사용되는 경우
또는 세션 확인 같은 작업처럼 모든 페이지에서 삽입되야할 요소의 경우
따로 별도의 문서로 작성하여 include 지시어를 통해 필요한 페이지에서 포함시킬 수 있습니다.

#### 작성 방식
```jsp
<%@ page file="파일 경로" %>
```

### 2. 스크립트 요소 (Script Element)

JSP에서 Java코드를 직접 작성할 수 있게 해주는 부분입니다.
용도에 따라 아래 3가지로 구분 됩니다.

#### (1) 선언부
표현식, 스크립틀릿에서 사용할 변수나 메서드를 선언합니다. _jspService() 메서드 외부에 위치합니다.

**작성 방식**
```jsp
<%! 선언부 내용 %>
```

#### (2) 스크립틀릿
JSP 페이지가 요청을 받을 때 실행되야할 Java코드를 작성합니다. _jspService() 메서드 내부에 위치합니다.

**작성 방식**
```jsp
<% 스크립틀릿 내용 %>
```

#### (3) 표현식
화면에 값을 하나씩 표현해줄 때 사용합니다. _jspService() 메서드 내부에 위치합니다.

**작성 방식**
```jsp
<%= 표현식 내용 %>
```

---

## JSP 예제

### include 지시어 사용 예시

#### Include.jsp
```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<header>
    저는 헤더입니다! 다른 파일에서 왔어요!
</header>
```

#### Main.jsp
```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ include file="Include.jsp" %>
<body>
    <div>저는 바디입니다! 헤더는 include해왔어요!</div>
</body>
```

#### 결과

```html
<header>
    저는 헤더입니다! 다른 파일에서 왔어요!
</header>
<body>
    <div>저는 바디입니다! 헤더는 include해왔어요!</div>
</body>
